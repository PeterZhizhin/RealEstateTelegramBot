# Проект Telegram бота для поиска аренды квартир с сайта www.cian.ru

На данный момент, рынок аренды 1-комнатных квартир в Москве содержит
более 50 тысяч предложений. Однако пользователи, желающие снять квартиру
сталкиваются с большим числом проблем, несмотря на это изобилие предложений:
риэлторы размещают квартиры-"приманки", выгодные предложения быстро выкупаются.

Данный проект -- это попытка решить данные проблемы и упростить поиск квартиры
для конечного пользователя. Он предлагает автоматическое оповещение о новых
квартирах и фильтрацию предложений от очевидно <<мусорных>> предложений.

## Инструменты реализации

Главный язык программирования проекта Python 3.
В качестве базы данных была выбрана [`MongoDB`](https://www.mongodb.org/) с фронтэндом
в виде библиотеки [`pymongo`](https://api.mongodb.org/python/current/) для Python.
 [`MongoDB`](https://www.mongodb.org/) была выбрана
из-за того, что структура данных полностью не была понятна
изначально, данные содержали большое число пропусков.

Для парсинга сайтов была выбрана библиотека
[`BeautifulSoap4`](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#).
Данная библиотека позволяет очень просто и крайне качественно
парсить веб-страницы HTML. Благодаря библиотеке [`lxml`](http://lxml.de/), эта задача
решается ещё быстрее.

## Реализация

 * Первым этапом стало написание обёртки над [Telegram API](core.telegram.org) для Python.
 Сторонние библиотеки или фреймворки не использовались так как
 никакой подходящей и стабильной реализации Telegram API в сети не было
 найдено.

 * Следующим этапом стала реализация класса пользователя. В основе пользователя
 лежит конечный автомат. Его реализация несколько раз менялась, но на данный момент
 состояния автомата и сама машина конечного автомата использует паттерны метапрограммирования,
 а сами состояния имеют возможность общаться с конечным автоматом и запрашивать у него
 переходы между состояниями.

 * Параллельно с этим был написан парсер сайтов www.cian.ru. По ссылке мы получали таблицу
 предложений, данные из которой заносили в БД и отправляли пользователю.

 * Написан менеджер обновлений, выполняющий поиск периодическую загрузку ссылок пользователей.

## Что нужно сделать

 * Необходимо реализовать загрузку предложений со всей Москвы для дальнейшего анализа рынка
 аренды, а так же для создания алгоритмов фильтрации.

 * Необходимо улучшить пользовательский интерфейс, сделать его более дружелюбным, более отзывчивым,
 добавить встроенные клавиатуры Telegram.

 * Можно добавить возможность возможность отслеживать ссылки других сайтов.

## План разработки

  * Интерфейс взаимодействия с конечными пользователями
  * Парсинг объявлений с помощью BeautifulSoap4
  * Уведомление пользователей о новых вариантах
  * Организация сбора данных на регулярной основе
  * Простое отсеивание плохих вариантов (очевидные дубли)

  * Мониторинг всех объявлений в Москве/Подмосковье
  * Улучшение стратегий фильтрации объявлений
  * Анализ рынка недвижимости

  * Презентация проекта
